% Chapitres\Chap2-ApprocheModelisation.tex


% ..............................................................................
% ..............................................................................
\section{Modélisation des systèmes} % (fold)
\label{sec:modelisation_des_systemes}

% ------------------------------------------------------------------------------
\subsection{Pourquoi et comment ?} % (fold)
\label{sub:pourquoi_et_comment}
\itodo{Décrire le choix de l’approche par modélisation}
Il existe plusieurs moyens permettant d’évaluer un système énergétique. Le premier
consiste à reproduire expérimentalement le système et son environnement. Cependant
ce processus est couteux , spécialement lorsque on essayer d’évaluer un système à l’échelle
du bâtiment. On est de plus contraint par les conditions extérieures que l’on ne contrôle
pas. Ainsi ces deux raisons font qu’il est compliqué et couteux de chercher à dimensionner
expérimentalement un système. Pour réduire le coût de la recherche et explorer plus de
variation il est nécessaire de pouvoir contrôler les conditions limites et de pouvoir
itérer rapidement entre différents compositions/régulations. La modélisation entre alors
en jeu proposant un contrôle complet des systèmes, de leur régulation, et des conditions
limites. Le système n’étant pas physique il est alors possible de faire varier n’importe
quel paramètre simplement afin d’évaluer son importance, son impact, ...
La modélisation est donc l’outil de choix pour réaliser une étude de faisabilité, un
dimensionnement, une optimisation.




\itodo{Décrire les outils utilisés: Modelica et les bibliothèques, Dymola et les solveurs}
Il existe de nombreux langages, logiciels pour réaliser des simulations plus ou moins complexes.
La première choses à définir est donc le niveau de précision que l’on souhaite pour son modèle ou
pour les différentes parties du modèle. Notre cas d’étude se place à l’échelle du bâtiment mais
l’on souhaite aussi conserver un contrôle important sur la gestion des équipements.
Ensuite il est nécessaire de déterminer le niveau d’accessibilité que l’on souhaite avoir
sur chaque composant du système. Le modèle \textbf{boîte noire} ne pourrait pas correspondre à notre
demande. Celui-ci ne nous offre pas le liberté de comprendre comment évolue chaque
composants du système et nous empêche d’explorer/modifier le code.
Pour la même raison un modèle \textbf{boîte grise} nous limite dans l’accès à certaines
partie du code et donc à la compréhension interne du fonctionnement du système.
Il est alors nécessaire d’utiliser un modèle \textbf{boîte blanche} garantissant
un contrôle total sur chaque partie du système et permettant d’évaluer le comportement
au niveau global mais aussi composant par composant.
Nous avons ainsi opté pour le langage Modelica et la plateforme de développement
Dymola (Dynamics Modeling Laboratory).



\itodo{Modelica description}
\mtodo{Ajouter référence}{Modelica} est un langage de programmation libre et ouvert développé pour répondre aux
contraintes de la modélisation multi-physique. Il a été pensé pour être intuitif
et offre une approche équationnelle et orienté objet au développeur.
L’approche objet est très intuitive et permet d’encapsuler un ensemble de données
et d’offrir des interface pour accéder à ces données. On peut alors composer de nouveaux
objets grâce à des références vers d’autre objets (composition) ou en héritant
du comportement d’un objet pour lui ajouter une spécialisation (héritage).
Enfin le langage est acausal permettant d’itérer entre différentes formulation
d’un problème facilement. Un système acausal récupère l’ensemble des variables qu’il
connait et défini les inconnus à partir de celles-ci. L’ordre d’écriture des équations
n’est donc plus importante et modifier un système n’oblige pas à re-écrire complètement
les équations pour isoler la variable que l’on cherche à déterminer. Prenons l’exemple
de la formule $U = R \times I$. Un problème causal requiert de connaître $R$ et $I$
pour trouver $U$.L’équation doit être re-écrite si on cherche à trouver $R$ ou $I$.
Si on utilise une approche acausal alors cette équation a une solution si on a deux des
trois inconnus ($U et R$ ou $R et I$, ...) sans avoir à modifier l’équation. On peut ainsi utiliser
la même formulation pour peut importe les variables connues.
On peut ainsi voir que le développement sous Modelica permet de rapidement proto-typer
des systèmes complexes.



\itodo{Dymola description}
Dymola est une suite de logiciels développée par \mtodo{Ajouter référence}{Dassault System}
permettant d’ajouter de nombreuses fonctionnalités.
La première étant l’interface graphique permettant de connecter différentes portion
de code de manière plus intuitive. Il ajoute aussi un débogueur puissant permettant
de trouver rapidement la portion de code qui pose problème, un outil pour faire du
refactoring. Enfin il offre un outil puissant pour compiler, initialiser et intégrer
le modèle avec un large choix d’intégrateurs avec le programme \mtodo{Ajouter référence}{Dymosim}.
Il propose aussi du support pour la parallélisation, les FMU, et, un outil
puissant pour faire du traitement des données durant et après les simulations. Enfin
Dymola propose grâce à des scripts d’accéder à l’ensemble des fonctionnalités
comme lancer une simulation, modifier un modèle, exporter un modèle, ...
Dymola est ainsi un outil puissant pour accélérer le développement de modèle Modelica.



\itodo{Couplage Dymola + Modelica description}
Ces deux outils offrent alors de nombreux avantages. On contrôle chaque partie
du système, le code est réutilisable, on peut choisir le détail de chaque partie
du modèle, et on peut le coupler avec d’autres logiciels si besoin est.

Le langage Modelica étant largement utilisé, de nombreuses bibliothèques open source
on été développées dont la liste peut être trouvée sur le site officiel de l’association Modelica
(\url{https://www.modelica.org/libraries}). Dans notre étude nous avons utilisé
la bibliothèque \mtodo{Ajouter référence}{Buildings} qui est développé par le
Laboratoire National Lawrence Berkeley (LBNL). C’est une bibliothèque libre et ouverte
orienté pour le secteur du bâtiment offrant de nombreux modèles de base.



\itodo{Pourquoi une modélisation détaillée d’un système existant}
Le but de cette étude est d’évaluer le potentiel de couverture d’un système solaire,
il apparaît donc important de pouvoir évaluer dans le détail son comportement au niveau
de chaque élément. On va chercher à comprendre comment évolue la température au sein
de la maison mais aussi des ballons, des capteurs, ...
Il est aussi important de pouvoir modifier facilement les différents éléments composant
le système comme les temporisations, les consignes, la taille des différents équipements, ...
L’étude ne s’intéresse en effet pas seulement à la performance finale du système mais
aux raisons et limitations qui ont pour conséquence ce résultat.



\itodo{Récapituler les besoins de l’étude}
Si on résume on a donc besoin de contrôler chaque composant pour évaluer si il se
comporte comme on l’entends. Il est aussi nécessaire de pouvoir facilement de manière
intuitive les sous-modèles sans affecter le modèle principal. On veut de plus pouvoir
évaluer le système au niveau du bâtiment et il est donc nécessaire de réaliser des
simulation sur une échelle de temps importante (de l’ordre de l’année).



\itodo{Conclure sur le choix de Modelica et Dymola}
Le choix du couple Modelica + Dymola est donc le résultat d’une recherche d’un outil
répondant à nos contraintes. On veut avoir un contrôle complet de chaque composant, leur
physique comme leur régulation et évaluer au niveau bâtiment la performance de celui-ci.
Ces deux outils nous permet d’évaluer/modifier/comprendre efficacement le système
sur différentes échelles tout en encourageant le processus itératif de cette étude.
% subsection pourquoi_et_comment (end)


% ------------------------------------------------------------------------------
\subsection{Un système solaire couplée au vecteur air} % (fold)
\label{sub:description_du_systeme_vecteur_air}
\itodo{Description schématique du système}
Le système solaire \mtodo{Ajouter Ref}{complet} comporte deux parties distinctes,
la partie hydraulique qui sera détaillée dans un premier temps et la partie
aéraulique qui sera expliqué ensuite.
\begin{figure}
    \begin{center}
        \includegraphics{schemas/air_complet_mono.pdf}
    \end{center}
    \caption{Représentation schématique de l’ensemble du système solaire combiné
             (hydraulique et aéraulique).
             \label{fig:air_complet_mono}}
\end{figure}

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\subsubsection{Choix du fluide caloporteur} % (fold)
\label{ssub:choix_du_fluide_caloporteur}
Afin de permettre au fluide de supporter les températures extérieures pour toutes
les météos nous avons opté pour un mélange d’eau (70\,\%) et d’ethylène-glycol (30\,\%).
On obtient alors une une chaleur spécifique massique de 3608\,\si{J/(kg.K)} et une
masse volumique de 1034\,\si{kg/m^3}.
\itodo{Ajouter le détail du calcul}
% subsubsection choix_du_fluide_caloporteur (end)

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\subsubsection{Description du fonctionnement de la partie hydraulique} % (fold)
\label{ssub:description_du_fonctionnement_de_la_partie_hydraulique}
\itodo{Décrire chaque système et les paramètres de base}
Dans cette partie les différents composants du système (\autoref{tab:collectors_specs}) seront détaillés.
\textbf{Il est important de noter que ces caractéristiques sont celle du cas de référence
qui sera utilisé comme base pour l’étude paramétrique ci-après.}
\begin{figure}
    \begin{center}
        \includegraphics{schemas/air_hydraulique.pdf}
    \end{center}
    \caption{Représentation schématique de la partie hydraulique du système solaire combiné.
             \label{fig:air_hydraulique}}
\end{figure}

Les panneaux solaire utilisés sont des modèles \mtodo{Améliorer}{IDMK 2.5} (\autoref{tab:collectors_specs}).
Ils sont disposés en parallèles pour augmenter leurs performances. En effet
le rendement d’un capteur solaire est directement lié à la température d’entrée du fluide
caloporteur. Dans le cas d’un montage en parallèle la température d’entrée est minimale
et permet donc de mieux valoriser les collecteurs.

Le \autoref{tab:tanks_specs} détaille les caractéristiques des deux ballons utilisés
dans le système solaire. Le ballon tampon sert à stocker l’énergie solaire disponible
durant la journée qui n’a pas été utilisé directement pour le chauffage ou assurer le maintien
de la température du ballon ECS (\autoref{tab:tanks_specs}). Le ballon contient un échangeur
sur toute sur toute sa hauteur afin de le charger avec l’énergie solaire. La circulation
à l’intérieur de l’échangeur est réversible en fonction de l’état de la vanne 3 voies (V3V)
solaire en partie basse de celui-ci comme détaillée ci-dessous. Le ballon ECS lui contient l’eau
provenant du réseau (sans glycol)
Il doit être maintenue à \mtodo{Ajouter référence}{55\,\si{\degreeCelsius}} pour éviter tout risque sanitaire
en particulier lié à la légionelle. Ce ballon est maintenue à cette consigne grâce à
l’énergie solaire par l’intermédiaire de l’échangeur en partie basse et par un appoint électrique
en partie haute garantissant une température de puisage à 50\,\si{\degreeCelsius} minimum. L’arrivée d’eau
du réseau se trouvant en partie basse du ballon on améliore l’efficacité de l’échangeur solaire
maximisant les gains solaires.

Le puisage en ECS représenté par un robinet, simule un profil de puisage (\itodo{Lien vers profil puisage})
simulant la demande en ECS du foyer.

La batterie à eau permet de fournir l’énergie solaire à l’air couvrant ainsi les besoins
en chauffage. Il est donc nécessaire de faire varier le débit de la pompe S2 afin d’optimiser
la part des besoins couverts par le solaire.

Enfin la V3V solaire est un élément important pour la régulation du système solaire. Son ouverture
et fermeture conditionne le mode de fonctionnement du système solaire comme décrit ci-après.

La performance du système réside dans sa capacité à s’adapter pour valoriser
l’énergie solaire disponible. Le système comporte plusieurs modes de fonctionnement
et considère le maintien de la température de l’eau chaude sanitaire (ballon ECS)
comme une priorité.
En journée lorsque l’irradiation solaire est assez importante la demande en énergie
pour le chauffage et la production d’ECS est couverte directement par le solaire
(\mtodo{Ajouter réf vers mode direct}).
Les pompes S2 et S5 étant respectivement les pompes pour diriger l’énergie solaire
vers le ballon ECS, et la batterie air/eau.
La V3V solaire est alors ouverte vers les capteurs et fermée vers le ballon tampon.
Si il n’y a pas de demande en énergie au niveau du ballon ECS ou du chauffage, le ballon
tampon est alors chargé (S6 se met en marche). Les pompes S6, S5, S2 peuvent être activées
en même temps permettant de profiter pleinement de l’énergie solaire pour couvrir les
besoins en chauffage, les besoins ECS, et charger le ballon tampon.
\begin{figure}
    \begin{center}
        \includegraphics{schemas/air_hydraulique_direct.pdf}
    \end{center}
    \caption{Schéma hydraulique du système solaire combiné en mode solaire direct
             (avec besoins de chauffage).
             \label{fig:air_hydraulique_direct}}
\end{figure}
\begin{figure}
    \begin{center}
        \includegraphics{schemas/air_hydraulique_direct_2.pdf}
    \end{center}
    \caption{Schéma hydraulique du système solaire combiné en mode solaire direct
             (sans besoins de chauffage).
             \label{fig:air_hydraulique_direct_2}}
\end{figure}
\begin{figure}
    \begin{center}
        \includegraphics{schemas/air_hydraulique_indirect.pdf}
    \end{center}
    \caption{Schéma hydraulique du système solaire combiné en mode solaire indirect.
             \label{fig:air_hydraulique_indirect}}
\end{figure}

Durant la journée, l’irradiation solaire permet directement de fournir de l’énergie
nécessaire, cependant le soir et la nuit cette énergie est indisponible. Le système
passe alors en mode indirect (\mtodo{Ajouter réf vers mode direct}). Il a été expliqué
que durant la journée, l’énergie excédentaire est stockée dans le ballon tampon. C’est
dans ce mode qu’elle va être utilisée. Dès que l’énergie dans les collecteurs n’est
plus suffisante, la V3V est orientée vers le ballon tampon est la pompe S6 n’est
plus autorisée à s’enclencher. Comme dans la configuration précédente la pompe S2
peut s’enclencher pour couvrir les besoins en chauffage grâce à l’énergie solaire
contenue dans le ballon tampon. L’énergie est donc toujours d’origine solaire mais
elle est fournit indirectement. Il est important de noter que dans ce mode de fonctionnement,
la pompe S5 n’est pas autorisée à s’activer. L’énergie solaire stockée dans le ballon tampon
étant conservée pour couvrir les besoins de chauffage.

Enfin le dernier mode est activé lorsque l’énergie solaire est insuffisante (direct et indirect)
Dans cette configuration, si il y a une demande en ECS ou en chauffage de nécessaire alors
l’appoint électrique est activé pour couvrir les besoins. Il est important de noter que
les terminaux ou l’appoint électrique(s) peuvent être actif(s) durant le mode direct ou
indirect si les besoins ne sont pas couverts entièrement par le solaire.


Les \mtodo{Ajouter lien}{figures} mettent en exergue les différents modes possibles
pour le système solaire.
\ftodo{Ajouter des graphiques montrant la transition entre les différents modes}



\begin{table}
\centering
\begin{tabular}{lcr}
    \toprule
    Paramètre                                & Valeur         & Unité                 \\
    \midrule
    Surface nette                            & 2,32           & \si{m^{2}}            \\
    Poids à vide                             & 54             & \si{Kg}               \\
    Contenance                               & 1,35           & \si{l}                \\
    $R_{optique}$                            & 78             & \si{\%}               \\
    Décroissance de performance              & -5,103         & -                     \\
    Coefficient $a_{1}$ (pertes linéiques)   & 3,796          & \si{W/(m^{2}.K)}      \\
    Coefficient $a_{2}$ (pertes surfaciques) & 0,013          & \si{W/(m^{2}.K^{2})}  \\
    Modulation diffus (IMDiff)               & 100            & \si{\%}               \\
    \bottomrule
\end{tabular}
\caption{Caractéristique du collecteur modèle IDMK 2.5 de chez Sonnenkraft.
         \label{tab:collectors_specs}}
\end{table}

\begin{table}
\centering
\begin{tabular}{l*{2}{c}r}
    \toprule
    Paramètre & Ballon tampon & Ballon ECS & Unité\\
    \midrule
    Volume                                       & 300   & 300    & \si{l}              \\
    Hauteur                                      & 1.6   & 1.67   & \si{m}              \\
    Épaisseur isolation                          & 100   & 55     & \si{mm}             \\
    \textgreek{l} isolant                        & 0.04  & 0.04   & \si{W/m^{2}.K}      \\
    Échangeur haut                               & 1.415 & 0.86   & \si{m}              \\
    Échangeur bas                                & 0.255 & 0.175  & \si{m}              \\
    Diamètre échangeur (extérieur)               & 34.6  & 27.9   & \si{mm}             \\
    Chaleur spécifique de échangeur (acier noir) & 490   & 490    & \si{J/kg.K}         \\
    Puissance nominale                           & 103   & 25     & \si{KW}             \\
    Température nominale (ballon)                & 10    & 45     & \si{\degreeCelsius} \\
    Température nominale (échangeur)             & 45    & 10     & \si{\degreeCelsius} \\
    Débit nominal                                & 0.36  & 0.1747 & \si{Kg/s}           \\
    \bottomrule
\end{tabular}
\caption{Caractéristiques techniques du ballon tampon et du ballon ECS.
         \label{tab:tanks_specs}}
\end{table}


Le système solaire est contrôlé par un algorithme permettant d’utiliser l’énergie
solaire efficacement. Comme décrit ci-dessus l’algorithme contrôle l’état des
différentes pompes et de la V3V. Afin de conserver un rendement intéressant au
niveau des capteurs, le débit des pompes est modulé pour conserver une différence
de température entre entrée et sortie des collecteurs au minimum à 10\,\si{\degreeCelsius}.
\ftodo{Ajouter diagramme Modelica pour l’algorithme de contrôle}

Afin d’éviter les marches/arrêts intempestifs des pompes, l’algorithme temporise
le passage d’un état à l’ordre. De plus un hystérésis au niveau des consignes, température
de consigne de chauffage, température de l’eau chaude sanitaire, températures minimales
en partie basse du ballon ECS, ...permet aussi de palier à ce problème. Un hystérésis
ajoute permet de ne plus considérer une consigne à atteindre mais une plage à atteindre.
Prenons l’exemple d’une consigne de température à 20\,\si{\degreeCelsius}.
Sans hystérésis dès que la température atteint 20\,\si{\degreeCelsius} l’algorithme
va considérer que la consigne est atteint et arrêter le chauffage.
Le problème apparaît alors clairement, on ne va pas maintenir la
consigne mais l’atteindre puis redescendre, réactiver le chauffage, ...
Grâce à un hystérésis de 0.5\,\si{\degreeCelsius} on va chercher à atteindre 20.5\,\si{\degreeCelsius}
avant d’arrêter le chauffage et attendre 19.5\,\si{\degreeCelsius} pour le redémarrer.
La V3V seulement être en deux mode: (i) Ouvert vers les collecteurs, (ii) Ouvert vers
le ballon tampon. Le débit des pompes et lui contrôlé par des contrôleurs PI (Proportionnel Intégrale).
Enfin la température de l’eau dans les ballons et limitée pour se conformer aux
valeurs maximales admissibles.
\ftodo{Ajouter graphique mettant en exergue l’action de l’hystérisis}

\ftodo{Ajouter le FSM pour chaque pompes et la V3V}
Chaque composant peut être représentés graphiquement par un automate fini hiérarchise
(Hierarchical Finite-state machine (HFSM)).
Cette représentation considère des états dans lesquels un système peut se trouver, et un
ensemble de transition d’un état à un autre. Un seul état peut être actif en même temps ce qui
requiert que chaque état implémente les transitions nécessaire pour réagir à toutes modification des conditions.
Ce modèle est très utilisé pour représenté une intelligence artificielle (robot,
personnage non-joueur dans un jeu vidéo, ...) même si il est aujourd’hui souvent
remplacé par des arbres comportementaux ou des planneurs.
La hiérarchisation permet de considérer des états principaux et des sous-état. Cette
approche est plus modulaire, la logique interne des états principaux n’a plus besoin
de connaître les états principaux existant. Le nombre de transition est donc fortement
réduit. Cette technique est utilisé pour le contrôle de la pompe S2 qui est plus complexe que les deux
autres.

% subsubsection description_du_fonctionnement_de_la_partie_hydraulique (end)


% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\subsubsection{Description du fonctionnement de la partie aéraulique} % (fold)
\label{ssub:description_du_fonctionnement_de_la_partie_aeraulique}

\itodo{Description de l’algorithme de fonctionnement sur l’air}
Le système se compose d’une partie hydraulique et d’une partie aéraulique, la partie
hydraulique est détaillée dans \mtodo{Ajouter lien}{section précédente}.

La partie aéraulique est responsable du chauffage mais aussi du maintien du taux minimal
de renouvellement d’air décrit dans l’arrêté (\mtodo{Ref arrêté}). Pour plus d’information concernant
le renouvellement d’air se référer à la \mtodo{Ajouter référence vers scénario}.
Cette partie décrit la logique de contrôle pour le fonctionnement du chauffage par l’air.
La centrale de traitement d’air se compose d’un caisson de mélange, d’une batterie à eau,
d’un ventilateur insufflant l’air et d’un terminal électrique assurant le respect de la température
de consigne.
\ifix{Modifier le schéma pour que le chauffage électrique soit en terminal}

L’algorithme fonctionne suivant trois états (\mtodo{Réf vers fig}) afin de limiter
la consommation électrique des ventilateurs, et l’inconfort des occupants.
\ftodo{Ajouter schéma fonctionnement FSM}

Lorsque la consigne à l’intérieur de la pièce est déjà atteint on se contente de fournir
le débit minimal réglementaire d’air neuf sans préchauffage. Lorsque il y a une demande de
chauffage on cherche dans un premier temps à couvrir les besoins en augmentant la température
de soufflage sans modifier le débit insufflé. Dans ce mode plusieurs cas sont possibles.
Il est important ici de bien faire la différence entre débit des pompes et du ventilateur.
Sans précisions, le débit se réfère au débit imposé par le ventilateur, et donc au débit d’air.

Si S2 est activé alors son débit (eau) est modulé en fonction de l’écart entre la consigne de soufflage (air)
et la température de sortie (air) de la batterie à eau. En effet l’état de la pompe S2 est déterminé
par la partie hydraulique mais sa vitesse est régulé en fonction de la consigne de soufflage.
Le débit d’eau (S2) varie ainsi pour maintenir l’air en sortie de batterie à la température
de soufflage imposée. La consigne de soufflage est déterminée suivant:
\begin{equation}\label{eq:consigne_soufflage}
    Tconsigne_{soufflage} = T_{ext} + PI_{soufflage} \times (Tmax_{soufflage} - T_{ext})
\end{equation}
avec $PI_{soufflage}$ la valeur du contrôleur PI qui est fonction de la différence entre consigne
et température de l’ambiance et $Tmax_{soufflage}$ la température maximal admissible pour l’insufflation
(fixé à 32\,\si{\degreeCelsius}.
Cette régulation permet de moduler la température en tenant compte de l’écart entre
consigne et température de l’ambiance mais aussi de la température extérieure (et donc des
déperditions).

Le caisson de mélange permet de récupérer de l’énergie passivement qui est déjà à
la température de consigne limitant la demande en énergie solaire et/ou électrique.
La batterie à eau est uniquement alimenté par de l’énergie solaire, soit par le chauffage
direct, soit indirect. C’est la pompe S2 qui l’alimente(\mtodo{Ref subs hydrau}).
\iunsure{Enfin un terminal électrique est ajouté à chaque borne d’insufflation afin
         de garantir la consigne de soufflage.}

Lorsque les besoins sont importants, il devient intéressant de moduler le débit pour deux
raisons: (i) récupérer l’énergie sur l’air extrait, (ii) augmenter la quantité d’énergie fournie.
On passe alors dans le dernier mode de fonctionnement: Modulation du débit d’air.
Le passage entre les deux modes est temporisé (10 min) pour éviter un effet yoyo.
Dans ce mode, la température est fixée
à la température maximale admissible mais le débit est lui variable. La variation du débit
est déterminé par le contrôleur PID qui est fonction de l’écart entre l’ambiance et la consigne.

Les terminaux électriques permettent d’assurer le maintien de la température de soufflage et sont par
conséquent, régulés avec un contrôleur PID dépendant de l’écart de température entre
la consigne de soufflage et l’air sortant de la batterie chaude.
Il est important de noter que durant la temporisation (passage entre modulation de la température et du débit),
l’électricité n’est pas favorisé. La demande de puissance est constante à ce moment là
et l’activation du terminal électrique ne dépend que de l’écart entre consigne de soufflage
et température en sortie de batterie. Si le solaire fournit déjà la température
de consigne en sortie de batterie alors même si les besoins ne sont pas couverts,
l’appoint électrique ne sera pas activé. Une fois dans le mode régulant le débit alors
l’appoint peut être activé si le solaire n’est pas suffisant.
Afin d’éviter de consommer de l’électricité inutilement, une temporisation de 3\,\si{min}
a été mise en place sur l’activation des terminaux électriques.

Finalement afin de profiter de l’inertie du bâtiment, le système autorise à charger
la maison durant la journée. Si les besoins en chauffage sont couvert et que de l’énergie solaire
est disponible en direct alors on augmente la consigne de la maison pour une nouvelle
consigne que l’on nomme consigne solaire.
Afin de ne pas vider l’énergie accumulée dans le ballon tampon le chauffage solaire
indirect n’est pas autorisé. De plus les terminaux électriques ne peuvent pas s’activer
et le débit de soufflage est limité au débit réglementaire de renouvellement d’air.
En effet il est recherché de


\ftodo{Ajouter description schématique de la logique de contrôle}



% subsubsection description_du_fonctionnement_de_la_partie_aeraulique (end)



% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\subsubsection{Choix de modélisation pour les composants principaux} % (fold)
\label{ssub:choix_de_modelisation_pour_les_composants_principaux}
\itodo{Choix de modélisation pour les systèmes}
Comme décrit ci-avant la bibliothèque \emph{Buildings} a été utilisé pour modélisé
la plupart des composants du système solaire. Le paragraphe suivant présente les principaux
composants du système solaire et le niveau de détail utilisé pour les modélisés.
La production solaire est calculé en suivant les règles établies dans le volet 2 de
la norme EN12975 (\mtodo{Ajouter Ref}{EN12975-2}). Ce volet décrit le protocole expérimental
européen nécessaire pour déterminer les coefficients caractéristiques d’un capteur solaire.
Les coefficients résultant de l’expérimentation permet de caractériser selon une loi
approchée (\mtodo{Ajouter équation}) qui permet d’approcher le comportement réel de celui-ci.
Les ballons sont discrétisés (découpe en sous-volume du volume total)
afin de prendre en compte la stratification. La stratification est un aspect important
particulièrement au niveau des ballons afin de mieux évaluer la performance les
gains/pertes au niveau des échangeurs. Sa modélisation est aussi indispensable
pour l’algorithme de contrôle qui dépend des températures à différentes
hauteurs du ballon (\mtodo{Lien vers partie algo}).
Les collecteurs et les canalisations sont aussi discrétisés afin de mieux évaluer
le rendement et les déperditions.
Les déperditions des canalisations est prise en compte pour la partie reliant
collecteurs et ballon tampon, le reste des canalisations est considéré adiabatique
car non exposé aux conditions extérieures.
Les pompes utilisées dans la modélisation sont à vitesse variable pour mieux s’adapter
à la quantité d’énergie solaire disponible au niveau des collecteurs (\mtodo{Lien vers la partie algo}).
L’appoint et les terminaux électriques sont simplement modélisé comme une puissance
injectée directement dans le fluide.

\ftodo{Ajouter une image du modèle avec une description des éléments (Modelica)}
% subsubsection choix_de_modelisation_pour_les_composants_principaux (end)


% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\subsubsection{Confiance dans les modèles} % (fold)
\label{ssub:confiance_dans_les_modeles}
\itodo{Description des modèles validés}
L’objectif de ces modélisation étant d’évaluer la performance du système solaire
couplé à une maison, l’un des éléments important est le modèle représentant la maison.
Le modèle utilisé pour la modéliser respecte la suite de test, \mtodo{Ajouter Réf}{BestTestCase}.
Ces tests permettent de vérifier la cohérence des températures au cours de l’année
(minimales et maximales). L’énergie consommée pour maintenir la maison (chauffage, refroidissement)
a aussi été validée sur une évolution horaire (pics de demande) et annuelle.
Le modèle décrivant les fenêtres a aussi été validé par \mtodo{Ajouter Réf}.
Il est aussi important de mentionner que les besoins de la maison modélisée sous Dymola
sont fortement similaires à ceux de la même maison modélisé en multi-zone avec le logiciel
EnergyPlus.

Une attention particulière à aussi été utilisé pour le modèle représentant les capteurs
solaires afin que leur performance soit représentatif du modèle réel. Pour ce faire
le modèle a d’abord été comparé à l’implémentation utilisé dans un logiciel de
simulation dynamique fortement utilisé, TrnSys. Ces premiers résultats montrent que
les deux modèles ont un comportement similaire, l’irradiation solaire sur les capteurs
étant très proches.
Dans un second temps, des données expérimentales ont été utilisées pour valider les
caractéristiques du capteur solaire et du modèle les utilisant.
Les données expérimentales, irradiation direct, indirect et la température de l’eau
en entrée des collecteurs ont ainsi été utilisé comme conditions limites pour le
modèle. La température de sortie des collecteurs (modélisation) a ainsi été comparée
à celle en condition réelle. Il a été montré que le modèle de capteur solaire
implémenté en Modelica reflète le comportement réelle des capteurs sur les deux mois
de données expérimentales disponibles.
\ftodo{Ajouter résultats de comparaison avec Trnsys et expérimentation}

Les caractéristiques des capteurs utilisés dans l’étude paramétrique proviennent
de la même source \mtodo{Ajouter Réf}, qui est un organisme dont l’action est de
vérifier la performance des capteurs dans les conditions expérimentales décrites
dans la norme (\mtodo{Ajouter Réf}).

% subsubsection confiance_dans_les_modeles (end)
% subsection description_du_systeme_vecteur_air (end)


% ------------------------------------------------------------------------------
\subsection{Un système solaire couplée au vecteur eau} % (fold)
\label{sub:description_du_système_vecteur_eau}
\itodo{Déscription des systèmes}
% subsection description_du_système_vecteur_eau (end)
% section modelisation_des_systemes (end)




% ..............................................................................
% ..............................................................................
\section{Modélisation du bâtiment} % (fold)
\label{sec:modelisation_du_batiment}


% ------------------------------------------------------------------------------
\subsection{Description de la maison} % (fold)
\label{sub:description_de_la_maison}

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\subsubsection{Description du site} % (fold)
\label{ssub:modelisation_du_site}
\itodo{Description du site étudié: climat, données metéos, ...}
L’étude porte sur les climats de Limoges, Bordeaux, Toulouse, Marseille, et Strasbourg
afin de couvrir les différentes configuration qui peuvent être rencontrées en
\itodo{Ajouter un tableau récap avec DJU, ensoleillement dispo, températures mini, ...}{France.}

Marseille correspond à un climat très ensoleillé avec peu de demande en chauffage
durant l’année entière. Il est alors à priori propice à une installation solaire.
À l’opposé le climat de Strasbourg est rude avec une forte demande en chauffage et
un ensoleillement très faible particulièrement durant les mois hivernaux. Il est alors
à priori non-propice à une installation solaire. Bordeaux et Toulouse propose tous deux
un climat favorable, l’ensoleillement est bon et les besoins de chauffage sont peu
importants. Limoges est entre le climat Bordelais et Strasbourgeois et correspond
ainsi à un cas d’étude intéressant pour évaluer l’impact d’une modification au niveau
composant sur les performances du système au niveau global.
La température du sol est considérée constante durant l’ensemble de la simulation
et identique pour chaque site site. Il est important de noter que la variation de
la température du sol est un élément important pour l’évaluation des besoins en chauffage
du bâtiment, mais est fortement dépendant de la composition du plancher et du niveau
d’isolation de celui-ci.

\itodo{Ajouter un tableau récap des besoins en énergie}

\ftodo{Ajouter une carte pour positionner les villes}
% subsubsection description_du_site (end)


% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\subsubsection{Description de l’enveloppe} % (fold)
\label{ssub:description_de_l_enveloppe}
\itodo{Description complète de la maison: Composition de base, surfaces, orientation, ...}
La maison a une surface habitable de \munsure{À vérifier}{100}\,\si{m^2}. Elle comporte
3 \mtodo{Ajouter orientation}{chambres}, une cuisine/salon, et un local technique
où se trouve les équipements du système. La maison comporte des combles non aménagés
et un vide sanitaire.

\ftodo{Ajouter image de la maison (Aurélie)}
Cette étude ne cherchera pas à modifier l’enveloppe de la maison qui est déjà le
résultat de l’étude \munsure{Travail d’aurélie}{paramétrique} mais se concentrera
sur l’impact de la modification des composants du système, de la régulation, et du climat.

La maison a été modélisé comme un ensemble de 3 zones, les combles, le vide-sanitaire, et la zone
à vivre. Le tableau ci-dessous () présente les caractéristiques des matériaux utilisés
dans la composition des parois. Celle-ci sont décrite au tableau suivant ().

\itodo{Tableau des matériaux}

\itodo{Tableau des parois}
% subsubsection description_de_l_enveloppe (end)


% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\subsubsection{Description des scénarios} % (fold)
\label{ssub:description_des_scenarios}
\itodo{Description des différents scénarios}
Le cas d’étude considère une famille de 4 personnes. Les scénarios utilisés pour
l’occupation, les apports internes, et, les consommations de l’éclairage proviennent
de la réglementation française (\itodo{Ajouter ref}{RT2012}).
Le scénario d’occupation est le suivant:


La température de l'eau du réseau varie en fonction du mois de l'année et de la
position géographique du bâtiment selon \mtodo{Ajouter Ref}.
La température d’arrivée de l’eau au niveau du ballon est un facteur important pour
évaluer la consommation d’énergie pour le puisage en ECS. Le récapitulatif (\autoref{tab:temp_water})
montre bien que la variation de la température est autant influencé par la période de l’année
que par la position géographique.
\mtodo{Ajouter Réf tecsol}
\begin{table}
\centering
\begin{tabular}{l*{12}{c}}
    \toprule
               & Janv & Fevr & Mars & Avr & Mai & Juin & Juil & Août & Sept & Oct & Nov & Dec \\
    \midrule
    Strasbourg & 5,3  & 5,8  & 7,7  & 9,5 & 11  & 13   & 14   & 14   & 12   & 9,8 & 7,5 & 5,8 \\
    Limoges    & 7    & 7,4  & 9    & 10  & 12  & 14   & 14   & 14   & 13   & 11  & 8,8 & 7,3 \\
    Toulouse   & 8,6  & 9.2  & 11   & 12  & 14  & 16   & 17   & 17   & 16   & 13  & 11  & 9   \\
    Bordeaux   & 8,9  & 9,3  & 11   & 12  & 14  & 15   & 16   & 16   & 15   & 13  & 11  & 9,2 \\
    Marseille  & 12   & 12   & 13   & 14  & 16  & 18   & 19   & 19   & 18   & 16  & 14  & 12  \\
    \bottomrule
\end{tabular}
\caption{Température de l'eau du réseau au cours de l'année en fonction de la
         position géographique.}
         \label{tab:temp_water}
\end{table}


\itodo{Description des différents consignes}
\itodo{Ajouter Réf vers scénarios}
Différents scénarios ont été pris mis en place afin de simuler une famille de 4 personnes;
2 enfants et 2 adultes. Dans un premier temps, les scénarios fixes sont décrits. Ces scénarios
ne subissent aucunes variations durant l’étude paramétrique.
\begin{itemize}
    \item Occupation %(\autoref{tab:})
    \item Charges équipements %(\autoref{tab:})
    \item Charges éclairage %(\autoref{tab:})
\end{itemize} 
Les charges internes sont le cumul des charges dû aux occupants, les équipements et à l’éclairage.
Le scénario d’occupation est représentatif d’une famille type.
On a donc deux adultes et deux enfants. Ils sont absents durant toute la journée;
les enfants étant à l’école et les parents au travail. Le Mercredi, il est admis que
la maison est occupée durant l’après midi et le weekend, le scénario
considère que toute la famille est présente.
Le scénario utilisé pour représenter la charge des équipements suit le même schéma que
l’occupation. La consommation est issue de la réglementation thermique, RT2012. Durant la nuit et les
inoccupations, un réduit représentant la veille des équipements est pris en compte.
\itodo{Décrire les différents scénarios avec des illustrations}
De la même manière le scénario représentant les charges liées à l’éclairage suivent
le même schéma que l’occupation. On ne considère pas de charge durant la nuit et la
journée en semaine. Le weekend durant la journée la consommation est abaissée comme
définie dans la RT2012.


\itodo{Décrire les scénarios variables}
\itodo{Ajouter Réf vers scénarios}
La suite présente les scénarios dont la variation a été étudiée durant l’étude:
\begin{itemize}
    \item Température de consigne %(\autoref{tab:})
    \item Profil de puisage ECS %(\autoref{tab:})
    \item Débits d’extractions d’air %(\autoref{tab:})
    \item Température de consigne solaire %(\autoref{tab:})
\end{itemize} 
Le descriptif ci-dessous présente le scénario du cas de référence, les variations
étant décrites dans le partie sur l’étude paramétrique.
Le premier est la température de consigne. Pour le cas de référence, on cherche à
maintenir une température de 19\,\si{\degreeCelsius} durant l’occupation avec un
réduit à 18\,\si{\degreeCelsius} la nuit. Durant les absences (après-midi des jours ouvrés)
il est considéré un réduit à 16\,\si{\degreeCelsius}.
Le profil de puisage du cas de référence considère un puisage répartie entre le matin (1/6),
l’après midi (1/6) et le soir (2/3). Il a été considéré une consommation d’eau chaude
sanitaire importante pour évaluer la performance du système dans le cas le plus défavorable.
En effet il a été retenue une consommation de 41\,\si{l/jour/pers} (\textbf{60\,\si{\degreeCelsius}}) alors que la
moyenne par personne est de l’ordre de 33\,\si{l/jour/pers} (\textbf{50\,\si{\degreeCelsius}}) \mtodo{Ajouter des sources}.
L’utilisation d’une ventilation a été simulé par le maintien du débit hygiénique
en cas d’occupation et le débit minimal en inoccupation. Ce débit est fixe et ne dépend
pas du taux d’humidité comme fonctionnerait une bouche hygroréglable, mais simule un
fonctionnement on/off. Il est en effet considéré que durant l’absence des occupants
le taux d’humidité est faible que par conséquent le débit de renouvellement est réduit.
Enfin il a été autorisé durant la journée (période d’inoccupation) d’augmenter la température
intérieure grâce au solaire afin de charger la maison en énergie et repousser la 
prochaine demande en chauffage.
\ftodo{Ajouter un graphique par scénario}
% subsection description_de_la_maison (end)


% ------------------------------------------------------------------------------
\subsection{Approche monozone} % (fold)
\label{sub:approche_monozone}
\itodo{Décrire la raison de ce choix}
Dans une première application, un modèle monozone a été utilisé pour réduire la
complexité du modèle. Comme décrit plus haut (\autoref{ssub:confiance_dans_les_modeles}),
le modèle respecte une large suite de test, et une approche trop détaillée n’est pas 
nécessaire à ce moment de l’analyse. Le but étant de faire une première évaluation du
potentiel solaire du système combiné.
Le modèle a cependant été comparé avec une implémentation dans Energy Plus afin de
vérifier que les deux modèle ais des résultats similaires. Le travail fais en amont
sur l’enveloppe de la maison étant complémentaire à celui-ci.

\itodo{Décrire les limitations de cette approches grâce au premiers résultats}
Les premiers résultats montrent un potentiel intéressant de la production solaire pour 
des climats allant de Marseille à Limoges. Dans un climat très hostile comme 
Strasbourg, la part solaire est faible et ce système ne semble pas permettre de couvrir
les besoins. Il est important de noter que l’énergie disponible pour le solaire est 
fortement dépendant des fichiers météos.
Il est aussi intéressant de voir les limitations de l’approche paramétrique. Aucune
interaction entre les composants n’est prise en compte et la seule information disponible
est donc difficilement extrapolable/utilisable pour d’autres cas. Il est en effet nécessaire
d’évaluer/ trier les paramètres influant. Une fois un certain nombre de paramètres retenus,
il est alors possible de suivre une méthode d’optimisation combinatoire pour évaluer 
un ensemble de solution optimales.
Enfin l’approche monozone montre aussi ces limites sur plusieurs aspects qui sont importants
pour l’évaluation d’une maison faiblement déperditive. La répartitions des charges internes
et des périodes d’occupation est un facteur important à prendre en compte. Sans une approche
multizone, il est impossible d’en tenir compte correctement (charges propres au type de pièce)
Il est aussi intéressant de voir quel est l’impact passif des équipements du système solaire sur la 
consommation et la charge de la maison. L’approche monozone n’ayant que un seul nœud
d’air, la prise en compte des apports par ces équipements est trop grossier.
Enfin l’approche multizone permet de modéliser un algorithme de régulation plus réaliste.
En effet pour prendre le cas de la CTA; l’insufflation et l’extraction ne se font pas au même endroit.
% subsection approche_monozone (end)


% ------------------------------------------------------------------------------
\subsection{Approche multizone} % (fold)
\label{sub:approche_multizone}
\itodo{Décrire les outils nécessaire pour l’approche multi-zone: EnergyPlus, FMU,
       Python, Sketchup, OpenStudio}
\itodo{Introduire les avantages au regard de l’approche multizone}
\itodo{Décrire la mise en place du modèle}
% subsection approche_multizone (end)
% section description_du_batiment (end)




% ..............................................................................
% ..............................................................................
\section{Étude paramétrique} % (fold)
\label{sec:etude_parametrique}


% ------------------------------------------------------------------------------
\subsection{Récapitulatif} % (fold)
\label{sub:récapitulatif}
\itodo{Descriptif des variations envisagées et pourquoi}
Comme décrit ci-avant, l’approche retenue pour une première évaluation du potentiel
d’un système solaire combiné couplé à une maison passive est une approche monozone.

\itodo{Variations des scénarios et des consignes}
\itodo{Variations des conditions limites}
\itodo{Variations des caractéristiques des composants}
\itodo{Variations de la régulation}

\itodo{Faire un récap des résultats de l’étude}


% subsection récapitulatif (end)


% ------------------------------------------------------------------------------
\subsection{Analyse détaillée} % (fold)
\label{sub:analyse_detaillee}
\itodo{Évaluation et analyse des résultats}
\itodo{Décrire cas par cas et expliquer les conclusions que l’on peut en tirer.}

\itodo{Impact de la metéo}
\itodo{Impact des variations au niveau des capteurs}
\itodo{Impact de la variation du volume des ballons}
\itodo{Impact des consignes (Température, surchauffe, puisage, ...)}
\itodo{Impact des variations au niveau algorithmique (tempo, débit, )}
% subsection analyse_detaillee (end)


% ------------------------------------------------------------------------------
\subsection{Ce qu’il faut retenir} % (fold)
\label{sub:ce_qu_il_faut_retenir}
\itodo{Conclusion de l’étude}

\itodo{Développement de modèles détaillés}
\itodo{Mise en évidence du découplage de la performance entre chauffage et ECS}
\itodo{Nécessité de comprendre les intéractions}
\itodo{Nécessité d’intégrer une estimation du coût ---> Optimisation}
% subsection ce_qu_il_faut_retenir (end)
% section etude_parametrique (end)

